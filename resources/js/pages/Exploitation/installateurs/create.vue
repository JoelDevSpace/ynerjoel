<script setup lang="ts">
import BtnAjouter from '@/components/buttons/BtnAjouter.vue';
import FlashMessage from '@/components/FlashMessage.vue';
import InputError from '@/components/InputError.vue';
import LinkBtnRetour from '@/components/links/LinkBtnRetour.vue';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import AppLayout from '@/layouts/AppLayout.vue';
import { type BreadcrumbItem } from '@/types';
import { Head, useForm } from '@inertiajs/vue3';

const breadcrumbs: BreadcrumbItem[] = [
    {
        title: 'Exploitation',
        href: '#',
    },
    {
        title: 'Installateurs',
        href: route('exploitation.installateurs.index'),
    },
    {
        title: 'Ajouter un Installateur',
        href: route('exploitation.installateurs.create'),
    },
];

const form = useForm({
    designation_juridique: '',
    nom_commercial: '',
    siren: '',
    num_etablissement: '',
    numero_tva: '',
    telephone: '',
    email: '',
    site_web: '',
    actif: '',
});
</script>

<template>
    <Head title="Ajout Installateur" />

    <AppLayout :breadcrumbs="breadcrumbs">
        <FlashMessage />
        <div class="flex h-full flex-1 flex-col gap-4 rounded-xl p-4">
            <div>
                <LinkBtnRetour :href="route('exploitation.installateurs.index')" />
            </div>
            <form class="flex flex-col gap-6" @submit.prevent="form.post(route('exploitation.installateurs.store'))">
                <div class="grid gap-2">
                    <Label for="designation_juridique">Libelle :</Label>
                    <Input
                        id="designation_juridique"
                        name="designation_juridique"
                        type="text"
                        :tabindex="1"
                        autocomplete="none"
                        v-model="form.designation_juridique"
                        placeholder="ex: SAS Pichon"
                        class="w-1/2 border-gray-300"
                    />
                    <InputError class="mt-2" :message="form.errors.designation_juridique" />
                </div>
                <div class="grid gap-2">
                    <Label for="nom_commercial">Nom Commercial :</Label>
                    <Input
                        id="nom_commercial"
                        name="nom_commercial"
                        type="text"
                        :tabindex="2"
                        autocomplete="none"
                        v-model="form.nom_commercial"
                        class="w-1/2 border-gray-300"
                    />
                    <InputError class="mt-2" :message="form.errors.nom_commercial" />
                </div>
                <div class="flex gap-2">
                    <div class="flex w-1/4 flex-col">
                        <Label for="siren" class="mb-2 ml-1">SIREN:</Label>
                        <Input
                            id="siren"
                            name="siren"
                            type="text"
                            :tabindex="2"
                            autocomplete="none"
                            v-model="form.siren"
                            class="w-3/4 border-gray-300"
                        />
                        <span class="ml-2 text-xs">9 chiffres</span>
                        <InputError class="mt-2" :message="form.errors.siren" />
                    </div>
                    <div class="flex w-1/4 flex-col">
                        <Label for="num_etablissement" class="mb-2 ml-1">Numéro d'Etablissement :</Label>
                        <Input
                            id="num_etablissement"
                            name="num_etablissement"
                            type="text"
                            :tabindex="2"
                            autocomplete="none"
                            v-model="form.num_etablissement"
                            class="w-3/4 border-gray-300"
                        />
                        <InputError class="mt-2" :message="form.errors.num_etablissement" />
                        <span class="ml-2 text-xs">5 chiffres</span>
                    </div>
                </div>
                <div class="grid gap-2">
                    <Label for="numero_tva">TVA Intracommunautaire :</Label>
                    <Input
                        id="numero_tva"
                        name="numero_tva"
                        type="text"
                        :tabindex="2"
                        autocomplete="none"
                        v-model="form.numero_tva"
                        placeholder="FRXX999999999"
                        class="w-1/4 border-gray-300"
                    />
                    <InputError class="mt-2" :message="form.errors.numero_tva" />
                </div>
                <div class="flex gap-2">
                    <div class="flex w-1/4 flex-col gap-2">
                        <Label for="telephone">Téléphone :</Label>
                        <Input
                            id="telephone"
                            name="telephone"
                            type="text"
                            :tabindex="2"
                            autocomplete="none"
                            v-model="form.telephone"
                            class="w-3/4 border-gray-300"
                        />
                        <InputError class="mt-2" :message="form.errors.siren" />
                    </div>
                    <div class="flex w-1/4 flex-col gap-2">
                        <Label for="email">Email :</Label>
                        <Input
                            id="email"
                            name="email"
                            type="text"
                            :tabindex="2"
                            autocomplete="none"
                            v-model="form.email"
                            class="w-3/4 border-gray-300"
                        />
                        <InputError class="mt-2" :message="form.errors.email" />
                    </div>
                </div>
                <div class="grid gap-2">
                    <Label for="site_web">Site web :</Label>
                    <Input
                        id="site_web"
                        name="site_web"
                        type="text"
                        :tabindex="2"
                        autocomplete="none"
                        v-model="form.site_web"
                        placeholder="https://www.example.com"
                        class="w-1/4 border-gray-300"
                    />
                    <InputError class="mt-2" :message="form.errors.site_web" />
                </div>
                <div class="flex gap-2">
                    <Label for="actif">Installateur Actif :</Label>
                    <input type="checkbox" id="actif" name="actif" v-model="form.actif" />
                    <InputError class="mt-2" :message="form.errors.actif" />
                </div>

                <div class="flex items-center gap-4"><BtnAjouter type="submit" /></div>
            </form>
        </div>
    </AppLayout>
</template>

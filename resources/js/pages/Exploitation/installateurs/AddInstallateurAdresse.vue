<script setup lang="ts">
import BtnAjouter from '@/components/buttons/BtnAjouter.vue';
import LinkBtnAnnuler from '@/components/links/LinkBtnAnnuler.vue';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { useForm } from '@inertiajs/vue3';

const props = defineProps({
    installateur: {
        type: Object,
        default: () => ({
            id: '',
        }),
    },
});

const formAdresse = useForm({
    type: '',
    adresse: '',
    adresse_complement: '',
    code_postal: '',
    ville: '',
    pays: 'France',
});

const emit = defineEmits(['closeAddModal']);

const submitForm = () => {
    emit('closeAddModal');
    formAdresse.post(route('exploitation.installateurs.adresses.store', props.installateur.id), {
        preserveScroll: true,
    });
};
</script>
<template>
    <div class="p-6">
        <h2 class="text-center text-lg font-medium text-gray-900">Ajouter une adresse à l'installateur</h2>
        <h2 class="text-center text-lg font-medium text-gray-900">{{ props.installateur.designation_juridique }}</h2>
        <form class="flex flex-col gap-2" @submit.prevent="submitForm">
            <input type="hidden" name="installateur" :value="installateur.id" />
            <div class="flex gap-2">
                <Label for="type" class="w-1/6">Type :</Label>
                <Input id="type" name="type" type="text" :tabindex="1" autocomplete="none" v-model="formAdresse.type" class="w-1/2 border-gray-300" />
                <InputError class="mt-2" :message="formAdresse.errors.type" />
            </div>
            <div class="flex gap-2">
                <Label for="adresse" class="w-1/6">Adresse :</Label>
                <Input
                    id="adresse"
                    name="adresse"
                    type="text"
                    :tabindex="2"
                    autocomplete="none"
                    v-model="formAdresse.adresse"
                    class="w-1/2 border-gray-300"
                />
                <InputError class="mt-2" :message="formAdresse.errors.adresse" />
            </div>
            <div class="flex gap-2">
                <Label for="adresse_complement" class="w-1/6">Complément :</Label>
                <Input
                    id="adresse_complement"
                    name="adresse_complement"
                    type="text"
                    :tabindex="3"
                    autocomplete="none"
                    v-model="formAdresse.adresse_complement"
                    class="w-1/2 border-gray-300"
                />
                <InputError class="mt-2" :message="formAdresse.errors.adresse_complement" />
            </div>
            <div class="flex gap-2">
                <Label for="code_postal" class="w-1/6">Code postal :</Label>
                <Input
                    id="code_postal"
                    name="code_postal"
                    type="text"
                    :tabindex="4"
                    autocomplete="none"
                    v-model="formAdresse.code_postal"
                    class="w-1/2 border-gray-300"
                />
                <InputError class="mt-2" :message="formAdresse.errors.code_postal" />
            </div>
            <div class="flex gap-2">
                <Label for="ville" class="w-1/6">Ville :</Label>
                <Input
                    id="ville"
                    name="ville"
                    type="text"
                    :tabindex="5"
                    autocomplete="none"
                    v-model="formAdresse.ville"
                    class="w-1/2 border-gray-300"
                />
                <InputError class="mt-2" :message="formAdresse.errors.ville" />
            </div>
            <div class="flex gap-2">
                <Label for="pays" class="w-1/6">Pays :</Label>
                <Input id="pays" name="pays" type="text" :tabindex="6" autocomplete="none" v-model="formAdresse.pays" class="w-1/2 border-gray-300" />
                <InputError class="mt-2" :message="formAdresse.errors.pays" />
            </div>
            <div class="flex items-center justify-center gap-6">
                <LinkBtnAnnuler @click="emit('closeAddModal')" />
                <BtnAjouter type="submit" />
            </div>
        </form>
    </div>
</template>

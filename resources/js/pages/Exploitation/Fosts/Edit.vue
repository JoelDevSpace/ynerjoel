<script setup lang="ts">
import BtnModifier from '@/components/buttons/BtnModifier.vue';
import InputError from '@/components/InputError.vue';
import LinkBtnRetour from '@/components/links/LinkBtnRetour.vue';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import AppLayout from '@/layouts/AppLayout.vue';
import { type BreadcrumbItem } from '@/types';
import { Head, useForm } from '@inertiajs/vue3';

const breadcrumbs: BreadcrumbItem[] = [
    {
        title: 'Exploitation',
        href: '#',
    },
    {
        title: 'Fosts',
        href: route('exploitation.fosts.index'),
    },
    {
        title: 'Modifier une fost',
        href: route('exploitation.fosts.index'),
    },
];

const props = defineProps<{ fost: any }>();
const fost = props.fost;

const form = useForm({
    code: fost.code || '',
    libelle: fost.libelle || '',
    denomination: fost.denomination || '',
    dateDebut: fost.date_debut,
    dateFin: fost.date_fin,
});

const submitForm = () => {
    form.put(route('exploitation.fosts.update', fost.id), {
        preserveScroll: true,
    });
};
</script>

<template>
    <Head title="Modification Fost" />

    <AppLayout :breadcrumbs="breadcrumbs">
        <div class="flex h-full flex-1 flex-col gap-4 rounded-xl p-4">
            <div>
                <LinkBtnRetour :href="route('exploitation.fosts.index')" />
            </div>
            <form class="flex flex-col gap-6" @submit.prevent="submitForm">
                <div class="grid gap-2">
                    <Label for="code">code :</Label>
                    <Input
                        id="code"
                        name="code"
                        type="text"
                        :tabindex="1"
                        autocomplete="none"
                        v-model="form.code"
                        placeholder="Saisir le code de la fost"
                        class="w-1/2"
                    />
                    <InputError class="mt-2" :message="form.errors.code" />
                </div>
                <div class="grid gap-2">
                    <Label for="libelle">Libelle :</Label>
                    <Input
                        id="libelle"
                        name="libelle"
                        type="text"
                        :tabindex="2"
                        autocomplete="none"
                        v-model="form.libelle"
                        placeholder="Saisir le libellé de la fost"
                        class="w-1/2"
                    />
                    <InputError class="mt-2" :message="form.errors.libelle" />
                </div>
                <div class="grid gap-2">
                    <Label for="denomination">Dénomination :</Label>
                    <Textarea
                        id="denomination"
                        name="denomination"
                        type="text"
                        :tabindex="3"
                        autocomplete="none"
                        v-model="form.denomination"
                        placeholder="Saisir la dénomination de la fost"
                        class="min-h-32 w-1/2 break-normal"
                    />
                    <InputError class="mt-2" :message="form.errors.denomination" />
                </div>
                <div class="grid gap-2">
                    <div class="flex gap-2">
                        <div class="flex flex-col">
                            <div class="flex gap-2">
                                <Label for="dateDebut">Date de Début :</Label>
                                <input
                                    type="date"
                                    class="h-9 w-[280px] justify-start rounded-md border border-gray-300 text-center font-normal text-gray-500 shadow-xs"
                                    id="dateDebut"
                                    name="dateDebut"
                                    v-model="form.dateDebut"
                                />
                            </div>
                            <InputError class="mt-2" :message="form.errors.dateDebut" />
                        </div>
                        <div class="flex flex-col">
                            <div class="flex gap-2">
                                <Label for="dateFin" class="ml-4">Date de Fin :</Label>
                                <input
                                    type="date"
                                    class="h-9 w-[280px] justify-start rounded-md border border-gray-300 text-center font-normal text-gray-500 shadow-xs"
                                    id="dateFin"
                                    name="dateFin"
                                    v-model="form.dateFin"
                                />
                            </div>
                            <InputError class="mt-2" :message="form.errors.dateFin" />
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <BtnModifier type="submit" />
                </div>
            </form>
        </div>
    </AppLayout>
</template>
